<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Conversor de Moedas</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    .container {
      width: 380px;
    }
    .converter, .pagamento {
      background: #fff;
      padding: 20px 30px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    h2 {
      margin-bottom: 20px;
      text-align: center;
    }
    select, input {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      width: 100%;
      padding: 12px;
      margin-top: 12px;
      background: #0078ff;
      color: #fff;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
    }
    button:hover {
      background: #005fcc;
    }
    .resultado {
      margin-top: 15px;
      font-size: 18px;
      font-weight: bold;
      color: #333;
      text-align: center;
    }
    /* Se√ß√£o pagamento */
    .hidden {
      display: none;
    }
    .opcao {
      background: #f9f9f9;
      padding: 15px;
      border-radius: 10px;
      margin: 10px 0;
      border-left: 6px solid #0078ff;
    }
    .pix {
      border-left-color: #32bcad;
    }
    /* Modal de idiomas */
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: #fff;
      padding: 20px 30px;
      border-radius: 8px;
      text-align: center;
      width: 300px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    .modal-content h3 {
      margin-bottom: 15px;
    }
    .modal-content button {
      margin: 5px 0;
      width: 100%;
    }
  </style>
</head>
<body>
  <div class="container">

    <!-- Modal de Idiomas -->
    <div id="modal" class="modal">
      <div class="modal-content">
        <h3>Escolha seu idioma / Choose language</h3>
        <button onclick="setLanguage('pt')">Portugu√™s</button>
        <button onclick="setLanguage('en')">English</button>
        <button onclick="setLanguage('es')">Espa√±ol</button>
        <button onclick="setLanguage('zh')">‰∏≠Êñá</button>
        <button onclick="setLanguage('th')">‡πÑ‡∏ó‡∏¢</button>
        <button onclick="setLanguage('fr')">Fran√ßais</button>
      </div>
    </div>

    <!-- Conversor -->
    <div class="converter">
      <h2 id="title">Conversor de Moedas</h2>
      <input type="number" id="valor" placeholder="Digite o valor">
      
      <select id="de">
        <option value="USD">D√≥lar (USD)</option>
        <option value="BRL">Real (BRL)</option>
        <option value="EUR">Euro (EUR)</option>
        <option value="GBP">Libra (GBP)</option>
      </select>
      
      <select id="para">
        <option value="BRL">Real (BRL)</option>
        <option value="USD">D√≥lar (USD)</option>
        <option value="EUR">Euro (EUR)</option>
        <option value="GBP">Libra (GBP)</option>
      </select>
      
      <button onclick="converter()" id="btn-converter">Converter</button>
      <div class="resultado" id="resultado"></div>
      <button id="btn-pagamento" class="hidden" onclick="mostrarPagamento()">Prosseguir para Pagamento</button>
    </div>

    <!-- Pagamento -->
    <div class="pagamento hidden" id="pagamento">
      <h2>Formas de Pagamento</h2>
      <div id="valorFinal" class="resultado"></div>
      <select id="pais" onchange="mostrarOpcoes()">
        <option value="">-- Selecione seu pa√≠s --</option>
        <option value="BR">üáßüá∑ Brasil</option>
        <option value="PT">üáµüáπ Portugal</option>
        <option value="ES">üá™üá∏ Espanha</option>
        <option value="FR">üá´üá∑ Fran√ßa</option>
        <option value="US">üá∫üá∏ Estados Unidos</option>
        <option value="OT">üåç Outro pa√≠s</option>
      </select>
      <div id="opcoesPagamento"></div>
    </div>

  </div>

  <script>
    // Tradu√ß√µes
    const translations = {
      pt: { title: "Conversor de Moedas", placeholder: "Digite o valor", button: "Converter" },
      en: { title: "Currency Converter", placeholder: "Enter amount", button: "Convert" },
      es: { title: "Convertidor de Monedas", placeholder: "Ingrese valor", button: "Convertir" },
      zh: { title: "Ë¥ßÂ∏ÅËΩ¨Êç¢Âô®", placeholder: "ËæìÂÖ•ÈáëÈ¢ù", button: "ËΩ¨Êç¢" },
      th: { title: "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏õ‡∏•‡∏á‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô", placeholder: "‡∏õ‡πâ‡∏≠‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô", button: "‡πÅ‡∏õ‡∏•‡∏á‡∏Ñ‡πà‡∏≤" },
      fr: { title: "Convertisseur de Devises", placeholder: "Entrez le montant", button: "Convertir" }
    };

    // Modal de idioma
    window.onload = () => {
      let lang = localStorage.getItem("lang");
      if (!lang) {
        document.getElementById("modal").style.display = "flex";
      } else {
        applyLanguage(lang);
      }
    };

    function setLanguage(lang) {
      localStorage.setItem("lang", lang);
      applyLanguage(lang);
      document.getElementById("modal").style.display = "none";
    }

    function applyLanguage(lang) {
      document.getElementById("title").innerText = translations[lang].title;
      document.getElementById("valor").placeholder = translations[lang].placeholder;
      document.getElementById("btn-converter").innerText = translations[lang].button;
    }

    // Conversor
    async function converter() {
  try {
    let valor = parseFloat(document.getElementById("valor").value);
    let de = document.getElementById("de").value;
    let para = document.getElementById("para").value;

    if (isNaN(valor) || valor <= 0) {
      document.getElementById("resultado").innerHTML = "Digite um valor v√°lido.";
      return;
    }

    console.log(`Convertendo ${valor} ${de} para ${para}...`);

    let url = `https://api.exchangerate.host/latest?base=${de}&symbols=${para}`;
    let response = await fetch(url);

    if (!response.ok) throw new Error("Erro na API de c√¢mbio");

    let data = await response.json();
    console.log("Resposta da API:", data);

    let taxa = data.rates[para];
    let convertido = valor * taxa;
    let taxaComercial = convertido * 0.996; // aplica -0,4%

    let resultadoTxt = `${valor} ${de} = ${taxaComercial.toFixed(2)} ${para} (com taxa de 0,4%)`;
    document.getElementById("resultado").innerHTML = resultadoTxt;

    localStorage.setItem("valorConvertido", resultadoTxt);
    document.getElementById("btn-pagamento").classList.remove("hidden");

  } catch (e) {
    console.error("Erro na convers√£o:", e);
    document.getElementById("resultado").innerHTML = "Erro ao converter. Tente novamente.";
  }
}
    // Mostrar se√ß√£o de pagamento
    function mostrarPagamento() {
      let valor = localStorage.getItem("valorConvertido") || "";
      document.getElementById("valorFinal").innerText = valor;
      document.getElementById("pagamento").classList.remove("hidden");
    }

    // Op√ß√µes de pagamento
    function mostrarOpcoes() {
      let pais = document.getElementById("pais").value;
      let container = document.getElementById("opcoesPagamento");
      container.innerHTML = "";

      if (pais === "BR") {
        container.innerHTML = `
          <div class="opcao pix">
            <h3>üí≥ PIX</h3>
            <p><strong>Chave:</strong> pagamentos@seudominio.com</p>
            <p><strong>Prazo:</strong> at√© 12 horas</p>
          </div>
        `;
      } else if (pais) {
        container.innerHTML = `
          <div class="opcao deposito">
            <h3>üè¶ Dep√≥sito Banc√°rio Internacional</h3>
            <p><strong>Banco:</strong> Nome do Banco</p>
            <p><strong>IBAN:</strong> PT50 0002 0123 1234 5678 9015 4</p>
            <p><strong>SWIFT:</strong> BCOMPTPL</p>
            <p><strong>Prazo:</strong> at√© 12 horas</p>
          </div>
        `;
      }
    }
  </script>
</body>
</html>